{"version":3,"file":"dep-32dc80e0.js","sources":["../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseForOwn.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/mapKeys.js","../../../components/loading/directive.ts"],"sourcesContent":["import baseFor from './_baseFor.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nexport default baseForOwn;\n","import baseAssignValue from './_baseAssignValue.js';\nimport baseForOwn from './_baseForOwn.js';\nimport baseIteratee from './_baseIteratee.js';\n\n/**\n * The opposite of `_.mapValues`; this method creates an object with the\n * same values as `object` and keys generated by running each own enumerable\n * string keyed property of `object` thru `iteratee`. The iteratee is invoked\n * with three arguments: (value, key, object).\n *\n * @static\n * @memberOf _\n * @since 3.8.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns the new mapped object.\n * @see _.mapValues\n * @example\n *\n * _.mapKeys({ 'a': 1, 'b': 2 }, function(value, key) {\n *   return key + value;\n * });\n * // => { 'a1': 1, 'b2': 2 }\n */\nfunction mapKeys(object, iteratee) {\n  var result = {};\n  iteratee = baseIteratee(iteratee, 3);\n\n  baseForOwn(object, function(value, key, object) {\n    baseAssignValue(result, iteratee(value, key, object), value);\n  });\n  return result;\n}\n\nexport default mapKeys;\n","import type { Directive, DirectiveBinding } from 'vue';\nimport { mapKeys, isEqual, isObject } from 'lodash-es';\n\nimport { TdLoadingProps } from './type';\nimport produceLoading from './plugin';\n\nconst INSTANCE_KEY = Symbol('TdLoading');\n\nconst createInstance = (el: HTMLElement, binding: DirectiveBinding) => {\n  const { fullscreen, inheritColor } = binding.modifiers;\n  const options: TdLoadingProps = {\n    attach: () => el,\n    fullscreen: fullscreen ?? false,\n    inheritColor: inheritColor ?? false,\n    loading: binding.value,\n  };\n\n  if (isObject(binding.value)) {\n    mapKeys(binding.value, (value, key: keyof typeof options) => {\n      options[key] = value;\n    });\n  }\n\n  // @ts-ignore\n  // TODO: unique symbol' can't be used to index type 'HTMLElement'\n  el[INSTANCE_KEY] = {\n    options,\n    instance: produceLoading(options),\n  };\n};\n\nexport const vLoading: Directive = {\n  mounted(el, binding) {\n    if (binding.value) {\n      createInstance(el, binding);\n    }\n  },\n  updated(el, binding) {\n    const instance = el[INSTANCE_KEY];\n    const { value, oldValue } = binding;\n    if (!isEqual(value, oldValue)) {\n      const loading = value?.loading ?? value;\n      if (loading) {\n        createInstance(el, binding);\n      } else {\n        instance?.instance.hide();\n      }\n    }\n  },\n  unmounted(el) {\n    el[INSTANCE_KEY]?.instance.hide();\n  },\n};\n\nexport default vLoading;\n"],"names":["baseForOwn","object","iteratee","baseFor","keys","mapKeys","result","baseIteratee","value","key","baseAssignValue","INSTANCE_KEY","Symbol","createInstance","el","binding","_binding$modifiers","modifiers","fullscreen","inheritColor","options","attach","loading","isObject","instance","produceLoading","vLoading","mounted","updated","oldValue","isEqual","_value$loading","hide","unmounted","_el$INSTANCE_KEY"],"mappings":"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"}