{"version":3,"file":"dep-5c31240c.js","sources":["../../../common/js/table/utils.ts"],"sourcesContent":["import { isFunction, isNumber, get } from 'lodash-es';\nimport { BaseTableCol } from './types';\n\nexport function filterDataByIds(\n  data: Array<object> = [],\n  ids: Array<string | number> = [],\n  byId = 'id',\n): Array<object> {\n  return data.filter((d: Record<string, any> = {}) => ids.includes(d[byId]));\n}\n\nexport enum SCROLL_DIRECTION {\n  X = 'x',\n  Y = 'y',\n  UNKNOWN = 'unknown',\n}\n\nlet preScrollLeft: any;\nlet preScrollTop: any;\n\nexport const getScrollDirection = (scrollLeft: number, scrollTop: number): SCROLL_DIRECTION => {\n  let direction = SCROLL_DIRECTION.UNKNOWN;\n  if (preScrollTop !== scrollTop) {\n    direction = SCROLL_DIRECTION.Y;\n  } else if (preScrollLeft !== scrollLeft) {\n    direction = SCROLL_DIRECTION.X;\n  }\n  preScrollTop = scrollTop;\n  preScrollLeft = scrollLeft;\n  return direction;\n};\n\nexport function isRowSelectedDisabled(\n  selectColumn: { [key: string]: any },\n  row: Record<string, any>,\n  rowIndex: number,\n): boolean {\n  if (!selectColumn) return false;\n  let disabled = isFunction(selectColumn.disabled) ? selectColumn.disabled({ row, rowIndex }) : selectColumn.disabled;\n  if (selectColumn.checkProps) {\n    if (isFunction(selectColumn.checkProps)) {\n      disabled = disabled || selectColumn.checkProps({ row, rowIndex }).disabled;\n    } else if (selectColumn.checkProps === 'object') {\n      disabled = disabled || selectColumn.checkProps.disabled;\n    }\n  }\n  return !!disabled;\n}\n\n// 获取列属性\nexport function getColWidthAttr<T extends BaseTableCol<T>>(col: T, attrKey: 'width' | 'minWidth') {\n  const attr = col[attrKey];\n  return isNumber(attr) ? attr : parseFloat(attr);\n}\n\nexport function getEditableKeysMap(keys: Array<string | number>, list: any[], rowKey: string) {\n  const map: { [key: string | number]: boolean } = {};\n  for (let i = 0, len = list.length; i < len; i++) {\n    const rowValue = get(list[i], rowKey);\n    if (keys.includes(rowValue)) {\n      map[rowValue] = true;\n    }\n  }\n  return map;\n}\n\nexport function getColumnDataByKey(columns: any[], colKey: string): any {\n  for (let i = 0, len = columns.length; i < len; i++) {\n    if (columns[i].colKey === colKey) return columns[i];\n    if (columns[i].children?.length) {\n      const t = getColumnDataByKey(columns[i].children, colKey);\n      if (t) return t;\n    }\n  }\n  return null;\n}\n\nexport function getColumnIndexByKey(columns: any[], colKey: string): number {\n  for (let i = 0, len = columns.length; i < len; i++) {\n    if (columns[i].colKey === colKey) {\n      return i;\n    }\n    if (columns[i].children?.length) {\n      const t = getColumnDataByKey(columns[i].children, colKey);\n      if (t) return i;\n    }\n  }\n  return -1;\n}\n\nexport function getColumnsResetValue(columns: any[], resetValue: { [key: string]: any } = {}) {\n  for (let i = 0, len = columns.length; i < len; i++) {\n    const col = columns[i];\n    if (col.filter && 'resetValue' in col.filter) {\n      // eslint-disable-next-line no-param-reassign\n      resetValue[col.colKey] = col.filter.resetValue;\n    }\n    if (col.children?.length) {\n      getColumnsResetValue(col.children, resetValue);\n    }\n  }\n  return resetValue;\n}\n"],"names":["isRowSelectedDisabled","selectColumn","row","rowIndex","disabled","isFunction","checkProps","getEditableKeysMap","keys","list","rowKey","map","i","len","length","rowValue","get","includes","getColumnDataByKey","columns","colKey","_columns$i$children","children","t","getColumnIndexByKey","_columns$i$children2","getColumnsResetValue","resetValue","arguments","undefined","_col$children","col","filter"],"mappings":"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"}