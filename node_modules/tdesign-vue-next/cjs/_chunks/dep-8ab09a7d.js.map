{"version":3,"file":"dep-8ab09a7d.js","sources":["../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/_baseSum.js","../../../../node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/sum.js","../../../shared/hooks/useVirtualScrollNew/index.ts"],"sourcesContent":["/**\n * The base implementation of `_.sum` and `_.sumBy` without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {number} Returns the sum.\n */\nfunction baseSum(array, iteratee) {\n  var result,\n      index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var current = iteratee(array[index]);\n    if (current !== undefined) {\n      result = result === undefined ? current : (result + current);\n    }\n  }\n  return result;\n}\n\nexport default baseSum;\n","import baseSum from './_baseSum.js';\nimport identity from './identity.js';\n\n/**\n * Computes the sum of the values in `array`.\n *\n * @static\n * @memberOf _\n * @since 3.4.0\n * @category Math\n * @param {Array} array The array to iterate over.\n * @returns {number} Returns the sum.\n * @example\n *\n * _.sum([4, 2, 8, 6]);\n * // => 20\n */\nfunction sum(array) {\n  return (array && array.length)\n    ? baseSum(array, identity)\n    : 0;\n}\n\nexport default sum;\n","/**\n * 基于原作者（@louiszhai）的思路二次开发，为保证其他组件暂不受影响，单独开一个文件\n * 新增支持以下 3 个特性\n * 1. 支持不同表格高度\n * 2. 支持滚动到特定元素，方便 Select 等组件展开时直接定位到选中元素\n * 3. 支持数据变化不重置，方便支持树形结构虚拟滚动\n */\nimport { ref, computed, watch, Ref } from 'vue';\n// TODO need refactor\nimport { TScroll } from '../../../components/common';\nimport { useResizeObserver } from '../useResizeObserver';\nimport { max, min, sum, throttle } from 'lodash-es';\n\nexport type UseVirtualScrollParams = Ref<{\n  /** 列数据 */\n  data: { [key: string]: any }[];\n  scroll: TScroll & {\n    /** 固定行（冻结行），示例：[M, N]，表示冻结头 M 行和尾 N 行。M 和 N 值为 0 时，表示不冻结行 */\n    fixedRows?: Array<number>;\n  };\n  preventResizeRefresh?: boolean;\n}>;\n\nexport interface ScrollToElementParams {\n  /** 跳转元素下标 */\n  index: number;\n  /** 跳转元素距离顶部的距离 */\n  top?: number;\n  /** 单个元素高度非固定场景下，即 isFixedRowHeight = false。延迟设置元素位置，一般用于依赖不同高度异步渲染等场景，单位：毫秒 */\n  time?: number;\n  behavior?: 'auto' | 'smooth';\n}\n\nexport function useVirtualScrollNew(container: Ref<HTMLElement | null>, params: UseVirtualScrollParams) {\n  /** 注意测试：数据长度为空；数据长度小于表格高度等情况。即期望只有数据量达到一定程度才允许开启虚拟滚动 */\n  const visibleData = ref<any[]>([]);\n  // 用于显示表格列\n  const translateY = ref((params.value.data?.length || 0) * (params.value.scroll?.rowHeight || 50));\n  // 滚动高度，用于显示滚动条\n  const scrollHeight = ref(0);\n  // 已经通过节点渲染计算出来的各自行高\n  // 不要使用响应式，数据量大时会产生卡顿\n  let trHeightList: number[] = [];\n  const containerHeight = ref(0);\n  const containerWidth = ref(0);\n  const startAndEndIndex = ref<[number, number]>([0, 15]);\n\n  // 设置初始值\n  const tScroll = computed(() => {\n    const { scroll } = params.value;\n    if (!scroll) return {};\n    return {\n      bufferSize: scroll.bufferSize || 10,\n      isFixedRowHeight: scroll.isFixedRowHeight ?? false,\n      rowHeight: scroll.rowHeight || 47,\n      threshold: scroll.threshold || 100,\n      type: scroll.type,\n      fixedRows: scroll.fixedRows ?? [0, 0],\n    };\n  });\n\n  // 当前场景是否满足开启虚拟滚动的条件\n  const isVirtualScroll = computed(() => {\n    const { data } = params.value;\n    return tScroll.value.type === 'virtual' && tScroll.value.threshold < data.length;\n  });\n\n  // 一次循环遍历中计算可视范围的相关信息，减少大数据量时的遍历开销\n  function getVisibleRangeConfig() {\n    const scrollTop = container.value?.scrollTop ?? 0;\n    const fixedStart = tScroll.value.fixedRows[0];\n\n    // 记录前置 buffer 的高度\n    const prevBufferHeightList: number[] = [];\n    // 没有被渲染的行的高度，用于设定容器的 translateY\n    let hiddenHeight = 0;\n\n    let visibleStart = -1;\n    let visibleEnd = -1;\n\n    let totalHeight = 0;\n\n    for (let i = 0, len = params.value.data.length; i < len; i++) {\n      const rowHeight = trHeightList[i] ?? tScroll.value.rowHeight;\n      totalHeight = totalHeight + rowHeight;\n      // 获取第一个可视范围内的元素\n      if (totalHeight > scrollTop && visibleStart === -1) {\n        visibleStart = i;\n        if (visibleStart - tScroll.value.bufferSize > 0) {\n          hiddenHeight = totalHeight - rowHeight - sum(prevBufferHeightList);\n        }\n      }\n      if (visibleStart === -1) {\n        prevBufferHeightList.push(rowHeight);\n        if (prevBufferHeightList.length > tScroll.value.bufferSize) {\n          prevBufferHeightList.shift();\n        }\n      }\n      // 获取最后一个可视范围内的元素\n      if (\n        visibleEnd === -1 &&\n        (totalHeight > containerHeight.value + scrollTop || i === params.value.data.length - 1)\n      ) {\n        visibleEnd = i;\n      }\n\n      if (visibleStart !== -1 && visibleEnd !== -1) {\n        // 不再统计高度\n        break;\n      }\n    }\n\n    // 前后偏移 buffer\n    const startIndex = max([visibleStart - tScroll.value.bufferSize, 0]);\n    const endIndex = min([visibleEnd + tScroll.value.bufferSize, params.value.data.length]);\n\n    // 以 sticky 定位渲染的固定行，会占据高度，影响整体高度\n    const stickyHeight = sum(trHeightList.slice(0, Math.min(startIndex, fixedStart)));\n\n    return {\n      startIndex,\n      endIndex,\n      translateY: hiddenHeight - stickyHeight,\n    };\n  }\n\n  const updateVisibleData = throttle(() => {\n    // 计算前后的buffer偏移后的渲染数据\n    const { startIndex, endIndex, translateY: translateYValue } = getVisibleRangeConfig();\n\n    // 需要考虑固定行的情况\n    const fixedRows = tScroll.value.fixedRows;\n    const [fixedStart, fixedEnd] = fixedRows;\n    let fixedStartData = fixedStart ? params.value.data.slice(0, fixedStart) : [];\n    if (fixedStart && startIndex < fixedStart) {\n      fixedStartData = fixedStartData.slice(0, startIndex);\n    }\n    let fixedEndData = fixedEnd ? params.value.data.slice(params.value.data.length - fixedEnd) : [];\n    const bottomStartIndex = endIndex - params.value.data.length + 1 + (fixedEnd ?? 0);\n    if (fixedEnd && bottomStartIndex > 0) {\n      fixedEndData = fixedEndData.slice(bottomStartIndex);\n    }\n\n    if (startAndEndIndex.value.join() !== [startIndex, endIndex].join() && startIndex >= 0) {\n      translateY.value = translateYValue;\n      visibleData.value = fixedStartData.concat(params.value.data.slice(startIndex, endIndex), fixedEndData);\n      startAndEndIndex.value = [startIndex, endIndex];\n    }\n  }, 100);\n\n  // 固定高度场景，不需要通过行渲染获取高度（仅非固定高度场景需要）\n  const handleRowMounted = (rowData: any) => {\n    if (!isVirtualScroll.value || !rowData || tScroll.value.isFixedRowHeight || !container.value) return;\n    const trHeight = rowData.ref.value?.getBoundingClientRect().height || tScroll.value.rowHeight;\n    const rowIndex = rowData.data.VIRTUAL_SCROLL_INDEX;\n\n    if (trHeightList[rowIndex] !== trHeight) {\n      const diff = trHeight - trHeightList[rowIndex];\n      trHeightList[rowIndex] = trHeight;\n      // 采用 diff 的方式更新，不再遍历数组\n      scrollHeight.value = scrollHeight.value + diff;\n    }\n  };\n\n  const handleScroll = () => {\n    if (!isVirtualScroll.value) return;\n    updateVisibleData();\n  };\n\n  const refreshVirtualScroll = ([{ contentRect }]: [ResizeObserverEntry]) => {\n    // 如果宽度发生变化，重置滚动位置\n    if (params.value.preventResizeRefresh) return;\n    const maxScrollbarWidth = 16;\n    if (Math.abs(contentRect.width - containerWidth.value) > maxScrollbarWidth && !!container.value) {\n      container.value.scrollTop = 0;\n      translateY.value = 0;\n    }\n    containerWidth.value = contentRect.width;\n    // 高度更新后，由 height 独立的 watch 触发可视区域的更新\n    containerHeight.value = contentRect.height;\n  };\n\n  const addIndexToData = (data: any[]) => {\n    data.forEach((item, index) => {\n      // eslint-disable-next-line\n      item['VIRTUAL_SCROLL_INDEX'] = index;\n    });\n  };\n\n  const updateScrollTop = ({ index, top = 0, behavior }: ScrollToElementParams) => {\n    const scrollTop = sum(trHeightList.slice(0, index + 1)) - top;\n\n    container.value.scrollTo({\n      top: scrollTop,\n      behavior: behavior || 'auto',\n    });\n  };\n\n  /**\n   * 滚动到指定元素（对外暴露的方法，谨慎修改）\n   */\n  const scrollToElement = (p: ScrollToElementParams) => {\n    updateScrollTop(p);\n    // 不同行高的表格需要异步计算\n    if (!tScroll.value.isFixedRowHeight) {\n      const duration = p.time ?? 60;\n      const timer = setTimeout(() => {\n        updateScrollTop(p);\n        clearTimeout(timer);\n      }, duration);\n    }\n  };\n\n  // 如果初始化时 isVirtualScroll 为 false，undefined 的 ref 会导致无法监听元素高度变化\n  useResizeObserver(\n    computed(() => (isVirtualScroll.value ? container.value : undefined)),\n    refreshVirtualScroll,\n  );\n\n  // 固定高度场景，可直接通过数据长度计算出最大滚动高度\n  watch(\n    () => [[...params.value.data], tScroll.value, isVirtualScroll.value, container.value],\n    () => {\n      if (!isVirtualScroll.value || !container.value) return;\n      const { data } = params.value;\n      addIndexToData(data);\n\n      // 有可能初始化时，resize 监听没触发，尝试设置初始化容器高度\n      containerHeight.value = container.value.getBoundingClientRect().height;\n\n      if (trHeightList.length !== params.value.data.length) {\n        // 暂时对于 table 和 tree 场景，信任之前缓存的行高\n        // 后续优化可能提供一个参数，进行监听从而清除记录的行高会更好\n        const initHeightList: number[] = Array.from(trHeightList);\n        // 数据长度如果发生变化，裁剪高度记录的数组，避免算出异常的总高度\n        initHeightList.length = params.value.data.length;\n        initHeightList.fill(tScroll.value.rowHeight || 47);\n        trHeightList = initHeightList;\n      }\n\n      scrollHeight.value = sum(trHeightList);\n\n      // 清除记录的滚动顺序\n      startAndEndIndex.value = [0, 0];\n      updateVisibleData();\n    },\n    { immediate: true },\n  );\n\n  // 当容器高度变化后，重新计算可视区域数据\n  watch(\n    () => containerHeight.value,\n    () => {\n      updateVisibleData();\n    },\n  );\n\n  return {\n    visibleData,\n    translateY,\n    scrollHeight,\n    isVirtualScroll,\n    handleScroll,\n    handleRowMounted,\n    scrollToElement,\n  };\n}\n\nexport type VirtualScrollConfig = ReturnType<typeof useVirtualScrollNew>;\n"],"names":["baseSum","array","iteratee","result","index","length","current","undefined","sum","identity","useVirtualScrollNew","container","params","_params$value$data","_params$value$scroll","visibleData","ref","translateY","value","data","scroll","rowHeight","scrollHeight","trHeightList","containerHeight","containerWidth","startAndEndIndex","tScroll","computed","_scroll$isFixedRowHei","_scroll$fixedRows","bufferSize","isFixedRowHeight","threshold","type","fixedRows","isVirtualScroll","getVisibleRangeConfig","_container$value$scro","_container$value","scrollTop","fixedStart","prevBufferHeightList","hiddenHeight","visibleStart","visibleEnd","totalHeight","i","len","_trHeightList$i","push","shift","startIndex","max","endIndex","min","stickyHeight","slice","Math","updateVisibleData","throttle","_getVisibleRangeConfi","translateYValue","_fixedRows","_slicedToArray","fixedEnd","fixedStartData","fixedEndData","bottomStartIndex","join","concat","handleRowMounted","rowData","_rowData$ref$value","trHeight","getBoundingClientRect","height","rowIndex","VIRTUAL_SCROLL_INDEX","diff","handleScroll","refreshVirtualScroll","_ref2","_ref","contentRect","preventResizeRefresh","maxScrollbarWidth","abs","width","addIndexToData","forEach","item","updateScrollTop","top","_ref3$top","behavior","scrollTo","scrollToElement","p","_p$time","duration","time","timer","setTimeout","clearTimeout","useResizeObserver","watch","_toConsumableArray","initHeightList","Array","from","fill","immediate"],"mappings":"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"}