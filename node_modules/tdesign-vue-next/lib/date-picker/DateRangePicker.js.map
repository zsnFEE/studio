{"version":3,"file":"DateRangePicker.js","sources":["../../../components/date-picker/DateRangePicker.tsx"],"sourcesContent":["import { defineComponent, computed, ref, watch } from 'vue';\nimport dayjs from 'dayjs';\nimport { useDisabled, useReadonly, usePrefixClass } from '@tdesign/shared-hooks';\n\nimport { isArray, isFunction } from 'lodash-es';\n\nimport props from './date-range-picker-props';\nimport { DateValue, DateRangePickerPartial } from './type';\n\nimport { RangeInputPopup as TRangeInputPopup } from '../range-input';\nimport TRangePanel from './components/panel/RangePanel';\nimport { useRange } from './hooks/useRange';\nimport {\n  parseToDayjs,\n  formatTime,\n  formatDate,\n  isValidDate,\n  getDefaultFormat,\n  initYearMonthTime,\n} from '@tdesign/common-js/date-picker/format';\nimport { subtractMonth, addMonth, extractTimeObj } from '@tdesign/common-js/date-picker/utils';\nimport { dateCorrection } from './utils';\n\nexport default defineComponent({\n  name: 'TDateRangePicker',\n  props,\n  setup(props, { slots }) {\n    const COMPONENT_NAME = usePrefixClass('date-range-picker');\n\n    const {\n      inputValue,\n      popupVisible,\n      rangeInputProps,\n      popupProps,\n      value,\n      year,\n      month,\n      time,\n      cacheValue,\n      activeIndex,\n      isHoverCell,\n      isFirstValueSelected,\n      onChange,\n    } = useRange(props);\n\n    const disabled = useDisabled();\n    const isReadOnly = useReadonly();\n\n    const formatRef = computed(() =>\n      getDefaultFormat({\n        mode: props.mode,\n        enableTimePicker: props.enableTimePicker,\n        format: props.format,\n        valueType: props.valueType,\n      }),\n    );\n\n    // 记录面板是否选中过\n    const isSelected = ref(false);\n\n    watch(popupVisible, (visible) => {\n      // 面板展开重置数据\n      if (visible) {\n        isSelected.value = false;\n        cacheValue.value = formatDate(value.value || [], {\n          format: formatRef.value.valueType,\n          targetFormat: formatRef.value.format,\n        }) as string[];\n        time.value = formatTime(\n          value.value || [dayjs().format(formatRef.value.timeFormat), dayjs().format(formatRef.value.timeFormat)],\n          formatRef.value.format,\n          formatRef.value.timeFormat,\n          props.defaultTime,\n        ) as string[];\n\n        // 空数据重置为当前年月\n        if (!value.value.length) {\n          const { year: defaultYear, month: defaultMonth } = initYearMonthTime({\n            value: value.value,\n            mode: props.mode,\n            format: formatRef.value.format,\n            enableTimePicker: props.enableTimePicker,\n          });\n          year.value = defaultYear;\n          month.value = defaultMonth;\n        } else if (value.value.length === 2 && !props.enableTimePicker) {\n          // 确保右侧面板月份比左侧大 避免两侧面板月份一致\n          const nextMonth = value.value.map((v: string) => parseToDayjs(v, formatRef.value.format).month());\n          year.value = value.value.map((v: string) => parseToDayjs(v, formatRef.value.valueType).year());\n          if (year.value[0] === year.value[1] && nextMonth[0] === nextMonth[1]) {\n            nextMonth[0] === 11 ? (nextMonth[0] -= 1) : (nextMonth[1] += 1);\n          }\n          month.value = nextMonth;\n          // 月份季度选择时需要确保右侧面板年份比左侧大\n          if ((props.mode === 'month' || props.mode === 'quarter') && year.value[0] === year.value[1]) {\n            year.value = [year.value[0], year.value[0] + 1];\n          }\n        } else {\n          year.value = value.value.map((v: string) => parseToDayjs(v, formatRef.value.format).year());\n          if (year.value.length === 1) year.value = [year.value[0], year.value[0]];\n\n          month.value = value.value.map((v: string) => parseToDayjs(v, formatRef.value.format).month());\n          if (month.value.length === 1) month.value = [month.value[0], Math.min(month.value[0] + 1, 11)];\n        }\n      } else {\n        activeIndex.value = 0;\n        isHoverCell.value = false;\n        isFirstValueSelected.value = false;\n        if (props.needConfirm) {\n          inputValue.value = formatDate(value.value, {\n            format: formatRef.value.valueType,\n            targetFormat: formatRef.value.format,\n          });\n        } else {\n          confirmValueChange();\n        }\n      }\n    });\n\n    // 日期 hover\n    function onCellMouseEnter(date: Date) {\n      isHoverCell.value = true;\n      const nextValue = [...(inputValue.value as string[])];\n      nextValue[activeIndex.value] = formatDate(date, {\n        format: formatRef.value.format,\n      }) as string;\n      inputValue.value = nextValue;\n    }\n\n    // 日期 leave\n    function onCellMouseLeave() {\n      isHoverCell.value = false;\n      inputValue.value = cacheValue.value;\n    }\n\n    // 日期点击\n    function onCellClick(date: Date, { e }: { e: MouseEvent; partial: DateRangePickerPartial }) {\n      props.onPick?.(date, { e, partial: activeIndex.value ? 'end' : 'start' });\n\n      isHoverCell.value = false;\n      isSelected.value = true;\n\n      const nextValue = [...(inputValue.value as string[])];\n      nextValue[activeIndex.value] = formatDate(date, {\n        format: formatRef.value.format,\n      }) as string;\n      cacheValue.value = nextValue;\n      inputValue.value = nextValue;\n\n      // 有时间选择器走 confirm 逻辑\n      if (props.enableTimePicker) return;\n\n      // 确保两端都是有效值\n      const notValidIndex = nextValue.findIndex((v) => !v || !isValidDate(v, formatRef.value.format));\n\n      // 当两端都有有效值时更改 value\n      if (notValidIndex === -1 && nextValue.length === 2) {\n        // 二次修改时当其中一侧不符合上次区间规范时，清空另一侧数据\n        if (\n          !isFirstValueSelected.value &&\n          parseToDayjs(nextValue[0], formatRef.value.format).isAfter(parseToDayjs(nextValue[1], formatRef.value.format))\n        ) {\n          nextValue[activeIndex.value ? 0 : 1] = '';\n          cacheValue.value = nextValue;\n          inputValue.value = nextValue;\n        } else {\n          onChange?.(\n            formatDate(nextValue, {\n              format: formatRef.value.format,\n              targetFormat: formatRef.value.valueType,\n              autoSwap: true,\n            }) as DateValue[],\n            {\n              dayjsValue: nextValue.map((v) => parseToDayjs(v, formatRef.value.format)),\n              trigger: 'pick',\n            },\n          );\n        }\n      }\n\n      // 首次点击不关闭、确保两端都有有效值并且无时间选择器时点击后自动关闭\n      if (!isFirstValueSelected.value || !activeIndex.value) {\n        let nextIndex = notValidIndex;\n        if (nextIndex === -1) nextIndex = activeIndex.value ? 0 : 1;\n        activeIndex.value = nextIndex as 0 | 1;\n        isFirstValueSelected.value = !!nextValue[0];\n      } else {\n        popupVisible.value = false;\n      }\n    }\n\n    // 头部快速切换\n    function onJumperClick({ trigger, partial }: { trigger: string; partial: DateRangePickerPartial }) {\n      const partialIndex = partial === 'start' ? 0 : 1;\n\n      const monthCountMap = { date: 1, week: 1, month: 12, quarter: 12, year: 120 };\n      const monthCount = monthCountMap[props.mode] || 0;\n      const current = new Date(year.value[partialIndex], month.value[partialIndex]);\n\n      let next = null;\n      if (trigger === 'prev') {\n        next = subtractMonth(current, monthCount);\n      } else if (trigger === 'current') {\n        next = new Date();\n      } else if (trigger === 'next') {\n        next = addMonth(current, monthCount);\n      }\n\n      let nextYear = [...year.value];\n      nextYear[partialIndex] = next.getFullYear();\n      let nextMonth = [...month.value];\n      nextMonth[partialIndex] = next.getMonth();\n      const onlyYearSelect = ['year', 'quarter', 'month'].includes(props.mode);\n\n      // 头部日期切换修正\n      const correctedDate = dateCorrection(partialIndex, nextYear, nextMonth, onlyYearSelect);\n      nextYear = correctedDate.nextYear;\n      nextMonth = correctedDate.nextMonth;\n\n      year.value = nextYear;\n      month.value = nextMonth;\n    }\n\n    // time-picker 点击\n    function onTimePickerChange(val: string) {\n      const { hours, minutes, seconds, milliseconds, meridiem } = extractTimeObj(val);\n\n      const nextInputValue = [...(inputValue.value as DateValue[])];\n      const changedInputValue = nextInputValue[activeIndex.value];\n      const currentDate = !dayjs(changedInputValue, formatRef.value.format).isValid()\n        ? dayjs().year(year.value[activeIndex.value]).month(month.value[activeIndex.value])\n        : dayjs(changedInputValue, formatRef.value.format);\n      // am pm 12小时制转化 24小时制\n      let nextHours = hours;\n      if (/am/i.test(meridiem) && nextHours === 12) nextHours -= 12;\n      if (/pm/i.test(meridiem) && nextHours < 12) nextHours += 12;\n\n      const nextDate = currentDate.hour(nextHours).minute(minutes).second(seconds).millisecond(milliseconds).toDate();\n      nextInputValue[activeIndex.value] = nextDate;\n\n      const nextTime = [...time.value];\n      nextTime[activeIndex.value] = val;\n      time.value = nextTime;\n\n      isSelected.value = true;\n      inputValue.value = formatDate(nextInputValue, {\n        format: formatRef.value.format,\n      });\n      cacheValue.value = formatDate(nextInputValue, {\n        format: formatRef.value.format,\n      });\n    }\n    const confirmValueChange = (e?: MouseEvent) => {\n      const nextValue = [...(inputValue.value as string[])];\n\n      const notValidIndex = nextValue.findIndex((v) => !v || !isValidDate(v, formatRef.value.format));\n\n      // 当两端都有有效值时更改 value\n      if (notValidIndex === -1 && nextValue.length === 2) {\n        // 二次修改时当其中一侧不符合上次区间规范时，清空另一侧数据\n        if (\n          !isFirstValueSelected.value &&\n          parseToDayjs(nextValue[0], formatRef.value.format).isAfter(parseToDayjs(nextValue[1], formatRef.value.format))\n        ) {\n          nextValue[activeIndex.value ? 0 : 1] = '';\n          cacheValue.value = nextValue;\n          inputValue.value = nextValue;\n        } else {\n          props?.onConfirm?.({\n            date: nextValue.map((v) => dayjs(v).toDate()),\n            e: e || null,\n            partial: activeIndex.value ? 'end' : 'start',\n          });\n          onChange?.(\n            formatDate(nextValue, {\n              format: formatRef.value.format,\n              targetFormat: formatRef.value.valueType,\n              autoSwap: true,\n            }) as DateValue[],\n            {\n              dayjsValue: nextValue.map((v) => parseToDayjs(v, formatRef.value.format)),\n              trigger: 'confirm',\n            },\n          );\n        }\n      }\n    };\n    // 确定\n    function onConfirmClick({ e }: { e: MouseEvent }) {\n      confirmValueChange(e);\n\n      const nextValue = [...(inputValue.value as string[])];\n\n      const notValidIndex = nextValue.findIndex((v) => !v || !isValidDate(v, formatRef.value.format));\n\n      // 首次点击不关闭、确保两端都有有效值并且无时间选择器时点击后自动关闭\n      if (!isFirstValueSelected.value || !activeIndex.value) {\n        let nextIndex = notValidIndex;\n        if (nextIndex === -1) nextIndex = activeIndex.value ? 0 : 1;\n        activeIndex.value = nextIndex as 0 | 1;\n        isFirstValueSelected.value = !!nextValue[0];\n      } else if (nextValue.length === 2) {\n        popupVisible.value = false;\n      }\n    }\n\n    // 预设\n    function onPresetClick(preset: any, context: any) {\n      let presetValue = preset;\n      if (isFunction(preset)) {\n        presetValue = preset();\n      }\n      if (!isArray(presetValue)) {\n        console.error(`preset: ${preset} 预设值必须是数组!`);\n      } else {\n        onChange?.(\n          formatDate(presetValue, {\n            format: formatRef.value.format,\n            targetFormat: formatRef.value.valueType,\n            autoSwap: true,\n          }) as DateValue[],\n          {\n            dayjsValue: presetValue.map((p) => parseToDayjs(p, formatRef.value.format)),\n            trigger: 'preset',\n          },\n        );\n        popupVisible.value = false;\n        props.onPresetClick?.(context);\n      }\n    }\n\n    function onYearChange(nextVal: number, { partial }: { partial: DateRangePickerPartial }) {\n      let partialIndex = partial === 'start' ? 0 : 1;\n      if (props.enableTimePicker) partialIndex = activeIndex.value;\n\n      let nextYear = [...year.value];\n      let nextMonth = [...month.value];\n\n      nextYear[partialIndex] = nextVal;\n      const onlyYearSelect = ['year', 'quarter', 'month'].includes(props.mode);\n\n      // 头部日期切换修正\n      const correctedDate = dateCorrection(partialIndex, nextYear, nextMonth, onlyYearSelect);\n      nextYear = correctedDate.nextYear;\n      nextMonth = correctedDate.nextMonth;\n\n      year.value = nextYear;\n      if (!onlyYearSelect) month.value = nextMonth;\n    }\n\n    function onMonthChange(nextVal: number, { partial }: { partial: DateRangePickerPartial }) {\n      let partialIndex = partial === 'start' ? 0 : 1;\n      if (props.enableTimePicker) partialIndex = activeIndex.value;\n\n      const nextMonth = [...month.value];\n      nextMonth[partialIndex] = nextVal;\n      // 保证左侧时间不大于右侧\n      if (year.value[0] === year.value[1]) {\n        if (partialIndex === 0) {\n          // 操作了左侧区间, 处理右侧区间小于或等于左侧区间的场景，交互上始终报错右侧比左侧大 1\n          if (nextMonth[1] <= nextMonth[0]) {\n            nextMonth[1] = nextMonth[0] + 1;\n            if (nextMonth[1] === 12) {\n              // 处理跨年的边界场景\n              nextMonth[1] = 0;\n              year.value = [year.value?.[0], year.value?.[1] + 1];\n            }\n          }\n        }\n        if (partialIndex === 1) {\n          // 操作了右侧区间, 处理右侧区间小于或等于左侧区间的场景，交互上始终报错左侧比右侧小 1\n          nextMonth[0] = Math.min(nextMonth[0], nextMonth[1]);\n          if (nextMonth[0] >= nextMonth[1]) {\n            nextMonth[0] -= 1;\n            if (nextMonth[0] === -1) {\n              // 处理跨年的边界场景\n              nextMonth[0] = 11;\n              year.value = [year.value?.[0] - 1, year.value?.[1]];\n            }\n          }\n        }\n      }\n\n      month.value = nextMonth;\n    }\n\n    const panelProps = computed(() => ({\n      hoverValue: (isHoverCell.value ? inputValue.value : []) as string[],\n      value: (isSelected.value ? cacheValue.value : value.value) as string[],\n      isFirstValueSelected: isFirstValueSelected.value,\n      activeIndex: activeIndex.value,\n      year: year.value,\n      month: month.value,\n      format: formatRef.value.format,\n      mode: props.mode,\n      presets: props.presets,\n      time: time.value,\n      disableDate: props.disableDate,\n      firstDayOfWeek: props.firstDayOfWeek,\n      timePickerProps: props.timePickerProps,\n      enableTimePicker: props.enableTimePicker,\n      presetsPlacement: props.presetsPlacement,\n      popupVisible: popupVisible.value,\n      panelPreselection: props.panelPreselection,\n      cancelRangeSelectLimit: props.cancelRangeSelectLimit,\n      needConfirm: props.needConfirm,\n      onCellClick,\n      onCellMouseEnter,\n      onCellMouseLeave,\n      onJumperClick,\n      onConfirmClick,\n      onPresetClick,\n      onYearChange,\n      onMonthChange,\n      onTimePickerChange,\n    }));\n\n    return () => (\n      <div class={COMPONENT_NAME.value}>\n        <TRangeInputPopup\n          readonly={isReadOnly.value}\n          disabled={disabled.value}\n          label={props.label}\n          status={props.status}\n          tips={props.tips || slots.tips}\n          inputValue={inputValue.value as string[]}\n          popupProps={popupProps.value}\n          rangeInputProps={rangeInputProps.value}\n          popupVisible={popupVisible.value}\n          panel={() => <TRangePanel {...panelProps.value} />}\n        />\n      </div>\n    );\n  },\n});\n"],"names":["defineComponent","name","props","setup","slots","_ref","COMPONENT_NAME","usePrefixClass","_useRange","useRange","inputValue","popupVisible","rangeInputProps","popupProps","value","year","month","time","cacheValue","activeIndex","isHoverCell","isFirstValueSelected","onChange","disabled","useDisabled","isReadOnly","useReadonly","formatRef","computed","getDefaultFormat","mode","enableTimePicker","format","valueType","isSelected","ref","watch","visible","formatDate","targetFormat","formatTime","dayjs","timeFormat","defaultTime","length","_initYearMonthTime","initYearMonthTime","defaultYear","defaultMonth","nextMonth","map","v","parseToDayjs","Math","min","needConfirm","confirmValueChange","onCellMouseEnter","date","nextValue","_toConsumableArray","onCellMouseLeave","onCellClick","_ref2","_props2$onPick","e","onPick","partial","notValidIndex","findIndex","isValidDate","isAfter","autoSwap","dayjsValue","trigger","nextIndex","onJumperClick","_ref3","partialIndex","monthCountMap","week","quarter","monthCount","current","Date","next","subtractMonth","addMonth","nextYear","getFullYear","getMonth","onlyYearSelect","includes","correctedDate","dateCorrection","onTimePickerChange","val","_extractTimeObj","extractTimeObj","hours","minutes","seconds","milliseconds","meridiem","nextInputValue","changedInputValue","currentDate","isValid","nextHours","test","nextDate","hour","minute","second","millisecond","toDate","nextTime","_props2$onConfirm","onConfirm","onConfirmClick","_ref4","onPresetClick","preset","context","presetValue","isFunction","isArray","console","error","concat","_props2$onPresetClick","p","onYearChange","nextVal","_ref5","onMonthChange","_ref6","_year$value","_year$value2","_year$value3","_year$value4","panelProps","hoverValue","presets","disableDate","firstDayOfWeek","timePickerProps","presetsPlacement","panelPreselection","cancelRangeSelectLimit","_createVNode","TRangeInputPopup","label","status","tips","panel","TRangePanel"],"mappings":"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"}