{"version":3,"file":"dep-1f7ad104.js","sources":["../../../common/js/utils/easing.ts","../../../shared/utils/dom.ts"],"sourcesContent":["/**\n * @file\n * 缓动函数\n * 参考自: https://github.com/bameyrick/js-easing-functions/blob/master/src/index.ts\n */\n\nexport interface EasingFunction {\n  (current: number, start: number, end: number, duration: number): number;\n}\n\n/**\n * @export\n * @param {number} current 当前时间\n * @param {number} start 开始值\n * @param {number} end 结束值\n * @param {number} duration 持续时间\n * @returns\n */\nexport const linear: EasingFunction = (current, start, end, duration) => {\n  const change = end - start;\n  const offset = (change * current) / duration;\n  return offset + start;\n};\n\n/**\n * @export\n * @param {number} current 当前时间\n * @param {number} start 开始值\n * @param {number} end 结束值\n * @param {number} duration 持续时间\n * @returns\n */\nexport const easeInOutCubic: EasingFunction = (current, start, end, duration) => {\n  const change = (end - start) / 2;\n  let time = current / (duration / 2);\n  if (time < 1) {\n    return change * time * time * time + start;\n  }\n  time -= 2;\n  // eslint-disable-next-line no-return-assign\n  return change * (time * time * time + 2) + start;\n};\n","/**\n * Thanks to https://spothero.com/static/main/uniform/docs-js/module-DOMUtils.html\n */\n/* eslint-disable no-param-reassign */\n/* eslint-disable no-undef */\nimport { ComponentPublicInstance, VNode, isVNode, Comment } from 'vue';\nimport raf from 'raf';\nimport { isArray, isString, isFunction } from 'lodash-es';\n\nimport { easeInOutCubic, EasingFunction } from '@tdesign/common-js/utils/easing';\nimport { ScrollContainer, ScrollContainerElement } from '../../components/common';\n\nexport const isServer = typeof window === 'undefined';\nconst trim = (str: string): string => (str || '').replace(/^[\\s\\uFEFF]+|[\\s\\uFEFF]+$/g, '');\n\nexport const on = ((): any => {\n  if (!isServer && document.addEventListener) {\n    return (\n      element: Node,\n      event: string,\n      handler: EventListenerOrEventListenerObject,\n      options?: boolean | AddEventListenerOptions,\n    ): any => {\n      if (element && event && handler) {\n        element.addEventListener(event, handler, options);\n      }\n    };\n  }\n  return (element: Node, event: string, handler: EventListenerOrEventListenerObject): any => {\n    if (element && event && handler) {\n      (element as any).attachEvent(`on${event}`, handler);\n    }\n  };\n})();\n\nexport const off = ((): any => {\n  if (!isServer && document.removeEventListener) {\n    return (\n      element: Node,\n      event: string,\n      handler: EventListenerOrEventListenerObject,\n      options?: boolean | AddEventListenerOptions,\n    ): any => {\n      if (element && event) {\n        element.removeEventListener(event, handler, options);\n      }\n    };\n  }\n  return (element: Node, event: string, handler: EventListenerOrEventListenerObject): any => {\n    if (element && event) {\n      (element as any).detachEvent(`on${event}`, handler);\n    }\n  };\n})();\n\nexport function once(\n  element: Node,\n  event: string,\n  handler: EventListenerOrEventListenerObject,\n  options?: boolean | AddEventListenerOptions,\n) {\n  const handlerFn = isFunction(handler) ? handler : handler.handleEvent;\n  const callback = (evt: any) => {\n    handlerFn(evt);\n    off(element, event, callback, options);\n  };\n\n  on(element, event, callback, options);\n}\n\nexport function hasClass(el: Element, cls: string): any {\n  if (!el || !cls) return false;\n  if (cls.indexOf(' ') !== -1) throw new Error('className should not contain space.');\n  if (el.classList) {\n    return el.classList.contains(cls);\n  }\n  return ` ${el.className} `.indexOf(` ${cls} `) > -1;\n}\n\nexport function addClass(el: Element, cls: string): any {\n  if (!el) return;\n  let curClass = el.className;\n  const classes = (cls || '').split(' ');\n\n  for (let i = 0, j = classes.length; i < j; i++) {\n    const clsName = classes[i];\n    if (!clsName) continue;\n\n    if (el.classList) {\n      el.classList.add(clsName);\n    } else if (!hasClass(el, clsName)) {\n      curClass += ` ${clsName}`;\n    }\n  }\n  if (!el.classList) {\n    el.className = curClass;\n  }\n}\n\nexport function removeClass(el: Element, cls: string): any {\n  if (!el || !cls) return;\n  const classes = cls.split(' ');\n  let curClass = ` ${el.className} `;\n\n  for (let i = 0, j = classes.length; i < j; i++) {\n    const clsName = classes[i];\n    if (!clsName) continue;\n\n    if (el.classList) {\n      el.classList.remove(clsName);\n    } else if (hasClass(el, clsName)) {\n      curClass = curClass.replace(` ${clsName} `, ' ');\n    }\n  }\n  if (!el.classList) {\n    el.className = trim(curClass);\n  }\n}\n\nexport const getAttach = (node: any, triggerNode?: any): HTMLElement | Element => {\n  const attachNode = isFunction(node) ? node(triggerNode) : node;\n  if (!attachNode) {\n    return document.body;\n  }\n  if (isString(attachNode)) {\n    return document.querySelector(attachNode);\n  }\n  if (attachNode instanceof HTMLElement) {\n    return attachNode;\n  }\n  return document.body;\n};\n\n/**\n * 获取滚动容器\n * 因为document不存在scroll等属性, 因此排除document\n * window | HTMLElement\n * @param {ScrollContainerElement} [container='body']\n * @returns {ScrollContainer}\n */\nexport const getScrollContainer = (container: ScrollContainer = 'body'): ScrollContainerElement => {\n  if (isString(container)) {\n    return document.querySelector(container) as HTMLElement;\n  }\n  if (isFunction(container)) {\n    return container();\n  }\n  return container;\n};\n\n/**\n * 返回是否window对象\n *\n * @export\n * @param {any} obj\n * @returns\n */\nfunction isWindow(obj: any) {\n  return obj && obj === obj.window;\n}\n\ntype ScrollTarget = HTMLElement | Window | Document;\n\n/**\n * 获取滚动距离\n *\n * @export\n * @param {ScrollTarget} target\n * @param {boolean} isLeft true为获取scrollLeft, false为获取scrollTop\n * @returns {number}\n */\nexport function getScroll(target: ScrollTarget, isLeft?: boolean): number {\n  // node环境或者target为空\n  if (isServer || !target) {\n    return 0;\n  }\n  const method = isLeft ? 'scrollLeft' : 'scrollTop';\n  let result = 0;\n  if (isWindow(target)) {\n    result = (target as Window)[isLeft ? 'pageXOffset' : 'pageYOffset'];\n  } else if (target instanceof Document) {\n    result = target.documentElement[method];\n  } else if (target) {\n    result = (target as HTMLElement)[method];\n  }\n  return result;\n}\ninterface ScrollTopOptions {\n  container?: ScrollTarget;\n  duration?: number;\n  easing?: EasingFunction;\n}\n\ndeclare type ScrollToResult<T = any> = T | { default: T };\n\nexport function scrollTo(target: number, opt: ScrollTopOptions): Promise<ScrollToResult> {\n  const { container = window, duration = 450, easing = easeInOutCubic } = opt;\n  const scrollTop = getScroll(container);\n  const startTime = Date.now();\n  return new Promise((res) => {\n    const fnc = () => {\n      const timestamp = Date.now();\n      const time = timestamp - startTime;\n      const nextScrollTop = easing(Math.min(time, duration), scrollTop, target, duration);\n      if (isWindow(container)) {\n        (container as Window).scrollTo(window.pageXOffset, nextScrollTop);\n      } else if (container instanceof Document || container.constructor.name === 'HTMLDocument') {\n        (container as Document).documentElement.scrollTop = nextScrollTop;\n      } else {\n        (container as HTMLElement).scrollTop = nextScrollTop;\n      }\n      if (time < duration) {\n        raf(fnc);\n      } else {\n        // 由于上面步骤设置了scrollTop, 滚动事件可能未触发完毕\n        // 此时应该在下一帧再执行res\n        raf(res);\n      }\n    };\n    raf(fnc);\n  });\n}\n\nfunction containerDom(parent: VNode | Element | Iterable<any> | ArrayLike<any>, child: any): boolean {\n  if (parent && child) {\n    let pNode = child;\n    while (pNode) {\n      if (parent === pNode) {\n        return true;\n      }\n      const { parentNode } = pNode;\n      pNode = parentNode;\n    }\n  }\n  return false;\n}\nexport const clickOut = (els: VNode | Element | Iterable<any> | ArrayLike<any>, cb: () => void): void => {\n  on(document, 'click', (event: { target: Element }) => {\n    if (isArray(els)) {\n      const isFlag = Array.from(els).every((item) => containerDom(item, event.target) === false);\n      return isFlag && cb && cb();\n    }\n    if (containerDom(els, event.target)) {\n      return false;\n    }\n    return cb && cb();\n  });\n};\n\n// 用于判断节点内容是否溢出\nexport const isTextEllipsis = (\n  ele: ComponentPublicInstance | Element | ComponentPublicInstance[] | Element[],\n): boolean => {\n  const { clientWidth = 0, scrollWidth = 0 } = ele as Element & { clientWidth: number; scrollWidth: number };\n  return scrollWidth > clientWidth;\n};\n\n// 将子元素selected滚动到父元素parentEle的可视范围内\nexport const scrollSelectedIntoView = (parentEle: HTMLElement, selected: HTMLElement) => {\n  // 服务端不处理\n  if (isServer) return;\n  // selected不存在或selected父元素不为parentEle则不处理\n  if (!selected || selected.offsetParent !== parentEle) {\n    parentEle.scrollTop = 0;\n    return;\n  }\n  const selectedTop = selected.offsetTop;\n  const selectedBottom = selectedTop + selected.offsetHeight;\n  const parentScrollTop = parentEle.scrollTop;\n  const parentViewBottom = parentScrollTop + parentEle.clientHeight;\n  if (selectedTop < parentScrollTop) {\n    // selected元素滚动过了，则将其向下滚动到可视范围顶部\n    parentEle.scrollTop = selectedTop;\n  } else if (selectedBottom > parentViewBottom) {\n    // selected元素未滚动到，则将其向上滚动到可视范围底部\n    parentEle.scrollTop = selectedBottom - parentEle.clientHeight;\n  }\n};\n\nexport const requestSubmit = (target: HTMLFormElement) => {\n  if (!(target instanceof HTMLFormElement)) {\n    throw new Error('target must be HTMLFormElement');\n  }\n  const submitter = document.createElement('input');\n  submitter.type = 'submit';\n  submitter.hidden = true;\n  target.appendChild(submitter);\n  submitter.click();\n  target.removeChild(submitter);\n};\n\n/**\n * 检查元素是否在父元素视图\n * http://stackoverflow.com/questions/123999/how-to-tell-if-a-dom-element-is-visible-in-the-current-viewport\n * @param elm 元素\n * @param parent\n * @returns boolean\n */\nexport function elementInViewport(elm: HTMLElement, parent?: HTMLElement): boolean {\n  const rect = elm.getBoundingClientRect();\n  if (parent) {\n    const parentRect = parent.getBoundingClientRect();\n    return (\n      rect.top >= parentRect.top &&\n      rect.left >= parentRect.left &&\n      rect.bottom <= parentRect.bottom &&\n      rect.right <= parentRect.right\n    );\n  }\n  return rect.top >= 0 && rect.left >= 0 && rect.bottom + 80 <= window.innerHeight && rect.right <= window.innerWidth;\n}\n\n/**\n * 获取元素某个 css 对应的值\n * @param element 元素\n * @param propName css 名\n * @returns string\n */\nexport function getElmCssPropValue(element: HTMLElement, propName: string): string {\n  let propValue = '';\n\n  if (document.defaultView && document.defaultView.getComputedStyle) {\n    propValue = document.defaultView.getComputedStyle(element, null).getPropertyValue(propName);\n  }\n\n  if (propValue && propValue.toLowerCase) {\n    return propValue.toLowerCase();\n  }\n\n  return propValue;\n}\n\n/**\n * 判断元素是否处在 position fixed 中\n * @param element 元素\n * @returns boolean\n */\nexport function isFixed(element: HTMLElement): boolean {\n  const p = element.parentNode as HTMLElement;\n\n  if (!p || p.nodeName === 'HTML') {\n    return false;\n  }\n\n  if (getElmCssPropValue(element, 'position') === 'fixed') {\n    return true;\n  }\n\n  return isFixed(p);\n}\n\n/**\n * 获取当前视图滑动的距离\n * @returns { scrollTop: number, scrollLeft: number }\n */\nexport function getWindowScroll(): { scrollTop: number; scrollLeft: number } {\n  const { body } = document;\n  const docElm = document.documentElement;\n  const scrollTop = window.pageYOffset || docElm.scrollTop || body.scrollTop;\n  const scrollLeft = window.pageXOffset || docElm.scrollLeft || body.scrollLeft;\n\n  return { scrollTop, scrollLeft };\n}\n\n/**\n * 获取当前视图的大小\n * @returns { width: number, height: number }\n */\nexport function getWindowSize(): { width: number; height: number } {\n  if (window.innerWidth !== undefined) {\n    return { width: window.innerWidth, height: window.innerHeight };\n  }\n  const doc = document.documentElement;\n  return { width: doc.clientWidth, height: doc.clientHeight };\n}\n\n/**\n * 判断一个 VNode 是否是注释节点（Comment）\n * Vue 3 中注释节点的 type 是 Comment\n *\n * @param node - 任意节点\n * @returns 是否为注释类型的 VNode\n */\nexport const isCommentVNode = (node: unknown): node is VNode => {\n  return isVNode(node) && node.type === Comment;\n};\n"],"names":["easeInOutCubic","current","start","end","duration","change","time","isServer","window","trim","str","replace","on","document","addEventListener","element","event","handler","options","attachEvent","concat","off","removeEventListener","detachEvent","once","handlerFn","isFunction","handleEvent","callback","evt","hasClass","el","cls","indexOf","Error","classList","contains","className","addClass","curClass","classes","split","i","j","length","clsName","add","removeClass","remove","getAttach","node","triggerNode","attachNode","body","isString","querySelector","HTMLElement","getScrollContainer","container","arguments","undefined","isWindow","obj","getScroll","target","isLeft","method","result","Document","documentElement","scrollTo","opt","_opt$container","_opt$duration","_opt$easing","easing","scrollTop","startTime","Date","now","Promise","res","fnc","timestamp","nextScrollTop","Math","min","pageXOffset","constructor","name","raf","isTextEllipsis","ele","_ele$clientWidth","clientWidth","_ele$scrollWidth","scrollWidth","requestSubmit","HTMLFormElement","submitter","createElement","type","hidden","appendChild","click","removeChild","elementInViewport","elm","parent","rect","getBoundingClientRect","parentRect","top","left","bottom","right","innerHeight","innerWidth","getElmCssPropValue","propName","propValue","defaultView","getComputedStyle","getPropertyValue","toLowerCase","isFixed","p","parentNode","nodeName","getWindowScroll","_document","docElm","pageYOffset","scrollLeft","getWindowSize","width","height","doc","clientHeight","isCommentVNode","isVNode","Comment"],"mappings":"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"}